<!doctype html>
<html lang="zh-CN">
	<head>
		<!-- 必须的 meta 标签 -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Bootstrap 的 CSS 文件 -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
			crossorigin="anonymous">

		<title>Hello, world!</title>
		<style>
			*,
			html {
				padding: 0;
				margin: 0;
			}

			a {
				text-decoration: none;
				font-size: 40px;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<input id="openfile" type='file' accept='text/plain' onchange='openFile(event)'>
                <button type="button" class="btn btn-outline-primary btn-lg" onclick="openFile(/歌单.txt)">加载默认歌单</button>
                <br>
		
		
		<div class="container-full">
			<div class="d-flex flex-column min-vh-100 justify-content-center align-items-center">
				<div id="output"></div>
				<figure class="round figure">
					<a id="res" href="#">点击左上角上传txt文档，再点击下方按钮开始随机。</a>
					<!-- <figcaption class="figure-caption text-center">A caption for the above image.</figcaption> -->
				</figure>

				<button id="btn" type="button" class="btn btn-outline-primary btn-lg">Primary</button>
			</div>
		</div>
		<!-- JavaScript 文件是可选的。从以下两种建议中选择一个即可！ -->

		<!-- 选项 1：包含 Popper 的 Bootstrap 集成包 -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
			crossorigin="anonymous"></script>

		<!-- 选项 2：Popper 和 Bootstrap 的 JS 插件各自独立 -->
		<!--
			<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
		-->
		<script>
			//开始按钮
			var btn = document.getElementById("btn");
			//显示文本
			var res = document.getElementById("res");
			
			var output = document.getElementById("output");
			var openfile = document.getElementById("openfile");
			//文本源
			var student = []

			var flag = true;
			var timer = null;
			//
			btn.onclick = function() {

				if (flag) {
					timer = setInterval(function() {
						var index = getRandom(student.length - 1, 0);
						res.innerHTML = student[index];
					}, 10);
					btn.value = "点击结束";
					flag = false;
				} else {
					clearInterval(timer);
					btn.value = "点击开始";
					flag = true;
				}
			}

			function getRandom(max, min) {

				return Math.round(Math.random() * (max - min) + min);
			}
			
			
			var openFile = function(event) {
				var input = event.target;
				var reader = new FileReader();
				reader.onload = function() {
					if(reader.result) {
						//写入元数据数组中
						student = reader.result.split(/\s+/);
						// student.push(reader.result);
						openfile.style.display = 'none';
					}
				};
				reader.readAsText(input.files[0]);
			};
		</script>
	</body>
</html>
